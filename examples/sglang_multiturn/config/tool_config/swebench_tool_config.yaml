tools:
- class_name: verl.tools.swebench_sandbox.SWEbenchSandboxTool
  config: &swebench_sandbox_config
    type: native
    mode: bash
    docker_image: swebench/base:latest
    workdir: ${oc.env:SWEBENCH_WORKDIR,/home/user}
    repo_cache: ~/swebench_repo_cache
    timeout_seconds: 900
    install_timeout_seconds: 600
    env_setup_timeout_seconds: 1200
    repo_setup_timeout_seconds: 900
    eval_timeout_seconds: 900
    repo_path: ${oc.env:SWEBENCH_REPO_PATH,/home/user/testbed}
    log_dir: tmp/verl_swebench_logs
    enable_e2b: true
    template: ${oc.env:SWEBENCH_TEMPLATE_ALIAS,swebench-conda}
    auto_template: ${oc.env:SWEBENCH_TEMPLATES_ENABLE,0}
    alias_prefix: ${oc.env:SWEBENCH_ALIAS_PREFIX,swebench-mini}
    max_output_tokens: ${oc.env:SWEBENCH_TOOL_MAX_OUTPUT_TOKENS,10000}
    chars_per_token: ${oc.env:SWEBENCH_TOOL_CHARS_PER_TOKEN,4}
    truncate_side: ${oc.env:SWEBENCH_TOOL_TRUNCATE_SIDE,middle}
    prewarm: ${oc.env:SWEBENCH_PREWARMED,0}
    prewarm_env_name: ${oc.env:SWEBENCH_PREWARM_ENV_NAME,testbed}
    worktree_mode: true
    worktree_root: ${oc.env:SWEBENCH_WORKTREE_ROOT,/home/user/worktrees}
  tool_schema:
    type: function
    function:
      name: bash
      description: "Run a bash command inside the SWEbench sandbox. The sandbox\
        \ persists across tool calls, so file edits remain for future actions."
      parameters:
        type: object
        properties:
          command:
            type: string
            description: "A single bash command to execute, e.g. 'ls', 'cd repo &&\
              \ git status', 'python -m pytest tests/'."
        required:
        - command
- class_name: verl.tools.swebench_sandbox.SWEbenchSandboxTool
  config:
    <<: *swebench_sandbox_config
    mode: submit_solution
  tool_schema:
    type: function
    function:
      name: submit_solution
      description: "Run the SWE-bench evaluation harness on the current sandbox state.\
        \ Use this once you are satisfied with your changes."
      parameters:
        type: object
        properties: {}
